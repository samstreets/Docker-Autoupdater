version: "3.8"

services:
  docker-autoupdater:
    image: ghcr.io/youruser/docker-autoupdater:latest
    # Or build locally:
    # build: .
    container_name: docker-autoupdater
    restart: unless-stopped
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock:ro
    environment:
      # How often to check for updates (in minutes)
      CHECK_INTERVAL_MINUTES: "60"

      # Set to "true" to automatically pull + recreate containers when updates are found.
      # Set to "false" to only log/notify without making changes.
      AUTO_UPDATE: "true"

      # Only manage containers that have this label set.
      # Format: "key=value"  (leave empty to check ALL running containers)
      LABEL_ENABLE: "autoupdate=true"

      # Set to "true" to simulate updates without actually making changes.
      DRY_RUN: "false"

      # Optional: POST notifications to this webhook (Discord, Slack, Gotify, etc.)
      NOTIFY_WEBHOOK: ""

      # Log verbosity: DEBUG | INFO | WARNING | ERROR
      LOG_LEVEL: "INFO"

# Example: a container that will be auto-updated
# Uncomment and add the label to your own services:
#
#  nginx:
#    image: nginx:latest
#    container_name: my-nginx
#    labels:
#      autoupdate: "true"
#    ports:
#      - "80:80"
